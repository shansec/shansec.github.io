<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>å­—ç¬¦ä¸²çš„æ‰©å±• | æœªæ¥å¯æœŸçš„åšå®¢</title>
    <meta property="og:title" content="å­—ç¬¦ä¸²çš„æ‰©å±• - æœªæ¥å¯æœŸçš„åšå®¢">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2024-04-24T09:58:44&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2024-04-24T09:58:44&#43;08:00'>
        
    <meta name="Keywords" content="golang,goè¯­è¨€,goè¯­è¨€ç¬”è®°,æœªæ¥å¯æœŸ,åšå®¢,å…¬ä¼—å·,å°ç¨‹åº">
    <meta name="description" content="å­—ç¬¦ä¸²çš„æ‰©å±•">
        
    <meta name="author" content="æœªæ¥å¯æœŸ">
    <meta property="og:url" content="http://shansec.github.io/post/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="http://shansec.github.io">
                        æœªæ¥å¯æœŸçš„åšå®¢
                    </a>
                
                <p class="description">ä¸“æ³¨äºGoè¯­è¨€(golang)ã€å‰ç«¯æŠ€æœ¯</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="http://shansec.github.io">Home</a>
                    
                    <a  href="http://shansec.github.io/archives/" title="å½’æ¡£">å½’æ¡£</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">Table of Contents</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#å­—ç¬¦çš„-unicode-è¡¨ç¤ºæ³•">å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•</a></li>
    <li><a href="#å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£">å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£</a></li>
    <li><a href="#ç›´æ¥è¾“å…¥-u2028-å’Œ-u2029">ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029</a></li>
    <li><a href="#jsonstringify-çš„æ”¹é€ ">JSON.stringify() çš„æ”¹é€ </a></li>
    <li><a href="#æ¨¡æ¿å­—ç¬¦ä¸²">æ¨¡æ¿å­—ç¬¦ä¸²</a></li>
    <li><a href="#å®ä¾‹æ¨¡æ¿ç¼–è¯‘">å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘</a></li>
    <li><a href="#æ ‡ç­¾æ¨¡æ¿">æ ‡ç­¾æ¨¡æ¿</a></li>
    <li><a href="#æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶">æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if (leftPos < 220) {
                postToc.css({ "width": leftPos - 10, "margin-left": (0 - leftPos) })
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }

        if ($("#TableOfContents").children().length < 1) {
            $(".post-toc").remove();
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">å­—ç¬¦ä¸²çš„æ‰©å±•</h1>
        </header>
        
  <time datetime="2024-04-24T01:58:44Z" class="post-meta meta-date dt-published">
    2024-04-24
  </time>


<div class="post-meta meta-category">
  <span>&nbsp;|</span>
  
    <a href='/categories/%E5%89%8D%E7%AB%AF' target="_blank">å‰ç«¯</a>
  
</div>


        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">&nbsp;|
                <span id="busuanzi_value_page_pv"></span> <span>reads</span>
            </span>
        </div>
        
        
        <div class="post-content">
            <p>æœ¬ç« ä»‹ç» ES6 å¯¹å­—ç¬¦ä¸²çš„æ”¹é€ å’Œå¢å¼ºï¼Œä¸‹ä¸€ç« ä»‹ç»å­—ç¬¦ä¸²å¯¹è±¡çš„æ–°å¢æ–¹æ³•ã€‚</p>
<h2 id="å­—ç¬¦çš„-unicode-è¡¨ç¤ºæ³•">å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•</h2>
<p>ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨<code>\uxxxx</code>å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­<code>xxxx</code>è¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">&#34;\u0061&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;a&#34;
</span></span></span></code></pre></div><p>ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨<code>\u0000</code>~<code>\uFFFF</code>ä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">&#34;\uD842\uDFB7&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;ğ ®·&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#d14">&#34;\u20BB7&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34; 7&#34;
</span></span></span></code></pre></div><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœç›´æ¥åœ¨<code>\u</code>åé¢è·Ÿä¸Šè¶…è¿‡<code>0xFFFF</code>çš„æ•°å€¼ï¼ˆæ¯”å¦‚<code>\u20BB7</code>ï¼‰ï¼ŒJavaScript ä¼šç†è§£æˆ<code>\u20BB+7</code>ã€‚ç”±äº<code>\u20BB</code>æ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª<code>7</code>ã€‚</p>
<p>ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">&#34;\u{20BB7}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;ğ ®·&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#d14">&#34;\u{41}\u{42}\u{43}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;ABC&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> hello <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">123</span>;
</span></span><span style="display:flex;"><span>hell<span style="color:#a61717;background-color:#e3d2d2">\</span>u{<span style="color:#099">6</span>F} <span style="color:#998;font-style:italic">// 123
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#d14">&#39;\u{1F680}&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;\uD83D\uDE80&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// true
</span></span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„ UTF-16 ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚</p>
<p>æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">&#39;\z&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;z&#39;</span>  <span style="color:#998;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">&#39;\172&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;z&#39;</span> <span style="color:#998;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">&#39;\x7A&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;z&#39;</span> <span style="color:#998;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">&#39;\u007A&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;z&#39;</span> <span style="color:#998;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">&#39;\u{7A}&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;z&#39;</span> <span style="color:#998;font-style:italic">// true
</span></span></span></code></pre></div><h2 id="å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£">å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£</h2>
<p>ES6 ä¸ºå­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢«<code>for...of</code>å¾ªç¯éå†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">let</span> codePoint <span style="color:#000;font-weight:bold">of</span> <span style="color:#d14">&#39;foo&#39;</span>) {
</span></span><span style="display:flex;"><span>  console.log(codePoint)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;f&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;o&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;o&#34;
</span></span></span></code></pre></div><p>é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº<code>0xFFFF</code>çš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„<code>for</code>å¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> text <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">String</span>.fromCodePoint(<span style="color:#099">0x20BB7</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">let</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> text.length; i<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>  console.log(text[i]);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34; &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34; &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">let</span> i <span style="color:#000;font-weight:bold">of</span> text) {
</span></span><span style="display:flex;"><span>  console.log(i);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;ğ ®·&#34;
</span></span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²<code>text</code>åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯<code>for</code>å¾ªç¯ä¼šè®¤ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼ˆéƒ½ä¸å¯æ‰“å°ï¼‰ï¼Œè€Œ<code>for...of</code>å¾ªç¯ä¼šæ­£ç¡®è¯†åˆ«å‡ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚</p>
<h2 id="ç›´æ¥è¾“å…¥-u2028-å’Œ-u2029">ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029</h2>
<p>JavaScript å­—ç¬¦ä¸²å…è®¸ç›´æ¥è¾“å…¥å­—ç¬¦ï¼Œä»¥åŠè¾“å…¥å­—ç¬¦çš„è½¬ä¹‰å½¢å¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œä¸­â€çš„ Unicode ç ç‚¹æ˜¯ U+4e2dï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å…¥è¿™ä¸ªæ±‰å­—ï¼Œä¹Ÿå¯ä»¥è¾“å…¥å®ƒçš„è½¬ä¹‰å½¢å¼<code>\u4e2d</code>ï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">&#39;ä¸­&#39;</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;\u4e2d&#39;</span> <span style="color:#998;font-style:italic">// true
</span></span></span></code></pre></div><p>ä½†æ˜¯ï¼ŒJavaScript è§„å®šæœ‰5ä¸ªå­—ç¬¦ï¼Œä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨è½¬ä¹‰å½¢å¼ã€‚</p>
<ul>
<li>U+005Cï¼šåæ–œæ ï¼ˆreverse solidus)</li>
<li>U+000Dï¼šå›è½¦ï¼ˆcarriage returnï¼‰</li>
<li>U+2028ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰</li>
<li>U+2029ï¼šæ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰</li>
<li>U+000Aï¼šæ¢è¡Œç¬¦ï¼ˆline feedï¼‰</li>
</ul>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œå­—ç¬¦ä¸²é‡Œé¢ä¸èƒ½ç›´æ¥åŒ…å«åæ–œæ ï¼Œä¸€å®šè¦è½¬ä¹‰å†™æˆ<code>\\</code>æˆ–è€…<code>\u005c</code>ã€‚</p>
<p>è¿™ä¸ªè§„å®šæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œéº»çƒ¦åœ¨äº JSON æ ¼å¼å…è®¸å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨è¾“å‡ºçš„ JSON è¢«<code>JSON.parse</code>è§£æï¼Œå°±æœ‰å¯èƒ½ç›´æ¥æŠ¥é”™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> json <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;&#34;\u2028&#34;&#39;</span>;
</span></span><span style="display:flex;"><span>JSON.parse(json); <span style="color:#998;font-style:italic">// å¯èƒ½æŠ¥é”™
</span></span></span></code></pre></div><p>JSON æ ¼å¼å·²ç»å†»ç»“ï¼ˆRFC 7159ï¼‰ï¼Œæ²¡æ³•ä¿®æ”¹äº†ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ä¸ªæŠ¥é”™ï¼Œ<a href="https://github.com/tc39/proposal-json-superset">ES2019</a> å…è®¸ JavaScript å­—ç¬¦ä¸²ç›´æ¥è¾“å…¥ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> PS <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">eval</span>(<span style="color:#d14">&#34;&#39;\u2029&#39;&#34;</span>);
</span></span></code></pre></div><p>æ ¹æ®è¿™ä¸ªææ¡ˆï¼Œä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ã€‚</p>
<p>æ³¨æ„ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ç°åœ¨å°±å…è®¸ç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ªå­—ç¬¦ã€‚å¦å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¾ç„¶ä¸å…è®¸ç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œè¿™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸º JSON æœ¬æ¥å°±ä¸å…è®¸ç›´æ¥åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<h2 id="jsonstringify-çš„æ”¹é€ ">JSON.stringify() çš„æ”¹é€ </h2>
<p>æ ¹æ®æ ‡å‡†ï¼ŒJSON æ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç ã€‚ä½†æ˜¯ï¼Œç°åœ¨çš„<code>JSON.stringify()</code>æ–¹æ³•æœ‰å¯èƒ½è¿”å›ä¸ç¬¦åˆ UTF-8 æ ‡å‡†çš„å­—ç¬¦ä¸²ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒUTF-8 æ ‡å‡†è§„å®šï¼Œ<code>0xD800</code>åˆ°<code>0xDFFF</code>ä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œ<code>\uD834\uDF06</code>æ˜¯ä¸¤ä¸ªç ç‚¹ï¼Œä½†æ˜¯å¿…é¡»æ”¾åœ¨ä¸€èµ·é…å¯¹ä½¿ç”¨ï¼Œä»£è¡¨å­—ç¬¦<code>ğŒ†</code>ã€‚è¿™æ˜¯ä¸ºäº†è¡¨ç¤ºç ç‚¹å¤§äº<code>0xFFFF</code>çš„å­—ç¬¦çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚å•ç‹¬ä½¿ç”¨<code>\uD834</code>å’Œ<code>\uDF06</code>è¿™ä¸¤ä¸ªç ç‚¹æ˜¯ä¸åˆæ³•çš„ï¼Œæˆ–è€…é¢ å€’é¡ºåºä¹Ÿä¸è¡Œï¼Œå› ä¸º<code>\uDF06\uD834</code>å¹¶æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ã€‚</p>
<p><code>JSON.stringify()</code>çš„é—®é¢˜åœ¨äºï¼Œå®ƒå¯èƒ½è¿”å›<code>0xD800</code>åˆ°<code>0xDFFF</code>ä¹‹é—´çš„å•ä¸ªç ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>JSON.stringify(<span style="color:#d14">&#39;\u{D834}&#39;</span>) <span style="color:#998;font-style:italic">// &#34;\u{D834}&#34;
</span></span></span></code></pre></div><p>ä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼Œ<a href="https://github.com/tc39/proposal-well-formed-stringify">ES2019</a> æ”¹å˜äº†<code>JSON.stringify()</code>çš„è¡Œä¸ºã€‚å¦‚æœé‡åˆ°<code>0xD800</code>åˆ°<code>0xDFFF</code>ä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>JSON.stringify(<span style="color:#d14">&#39;\u{D834}&#39;</span>) <span style="color:#998;font-style:italic">// &#34;&#34;\\uD834&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>JSON.stringify(<span style="color:#d14">&#39;\uDF06\uD834&#39;</span>) <span style="color:#998;font-style:italic">// &#34;&#34;\\udf06\\ud834&#34;&#34;
</span></span></span></code></pre></div><h2 id="æ¨¡æ¿å­—ç¬¦ä¸²">æ¨¡æ¿å­—ç¬¦ä¸²</h2>
<p>ä¼ ç»Ÿçš„ JavaScript è¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ï¼ˆä¸‹é¢ä½¿ç”¨äº† jQuery çš„æ–¹æ³•ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$(<span style="color:#d14">&#39;#result&#39;</span>).append(
</span></span><span style="display:flex;"><span>  <span style="color:#d14">&#39;There are &lt;b&gt;&#39;</span> <span style="color:#000;font-weight:bold">+</span> basket.count <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#39;&lt;/b&gt; &#39;</span> <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#d14">&#39;items in your basket, &#39;</span> <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#d14">&#39;&lt;em&gt;&#39;</span> <span style="color:#000;font-weight:bold">+</span> basket.onSale <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#d14">&#39;&lt;/em&gt; are on sale!&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>ä¸Šé¢è¿™ç§å†™æ³•ç›¸å½“ç¹çä¸æ–¹ä¾¿ï¼ŒES6 å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$(<span style="color:#d14">&#39;#result&#39;</span>).append(<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  There are &lt;b&gt;</span><span style="color:#d14">${</span>basket.count<span style="color:#d14">}</span><span style="color:#d14">&lt;/b&gt; items
</span></span></span><span style="display:flex;"><span><span style="color:#d14">   in your basket, &lt;em&gt;</span><span style="color:#d14">${</span>basket.onSale<span style="color:#d14">}</span><span style="color:#d14">&lt;/em&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  are on sale!
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>);
</span></span></code></pre></div><p>æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// æ™®é€šå­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">`In JavaScript &#39;\n&#39; is a line-feed.`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// å¤šè¡Œå­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#d14">`In JavaScript this is
</span></span></span><span style="display:flex;"><span><span style="color:#d14"> not legal.`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>console.log(<span style="color:#d14">`string text line 1
</span></span></span><span style="display:flex;"><span><span style="color:#d14">string text line 2`</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span> name <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;Bob&#34;</span>, time <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;today&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#d14">`Hello </span><span style="color:#d14">${</span>name<span style="color:#d14">}</span><span style="color:#d14">, how are you </span><span style="color:#d14">${</span>time<span style="color:#d14">}</span><span style="color:#d14">?`</span>
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç”¨åå¼•å·è¡¨ç¤ºã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> greeting <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">`\`Yo\` World!`</span>;
</span></span></code></pre></div><p>å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$(<span style="color:#d14">&#39;#list&#39;</span>).html(<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;li&gt;first&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;li&gt;second&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;/ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>);
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰€æœ‰æ¨¡æ¿å­—ç¬¦ä¸²çš„ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½æ˜¯è¢«ä¿ç•™çš„ï¼Œæ¯”å¦‚<code>&lt;ul&gt;</code>æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>trim</code>æ–¹æ³•æ¶ˆé™¤å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$(<span style="color:#d14">&#39;#list&#39;</span>).html(<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;li&gt;first&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;li&gt;second&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;/ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>.trim());
</span></span></code></pre></div><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨<code>${}</code>ä¹‹ä¸­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> authorize(user, action) {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">!</span>user.hasPrivilege(action)) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">throw</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Error</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#998;font-style:italic">// ä¼ ç»Ÿå†™æ³•ä¸º
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// &#39;User &#39;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// + user.name
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// + &#39; is not authorized to do &#39;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// + action
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// + &#39;.&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>      <span style="color:#d14">`User </span><span style="color:#d14">${</span>user.name<span style="color:#d14">}</span><span style="color:#d14"> is not authorized to do </span><span style="color:#d14">${</span>action<span style="color:#d14">}</span><span style="color:#d14">.`</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> x <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> y <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d14">`</span><span style="color:#d14">${</span>x<span style="color:#d14">}</span><span style="color:#d14"> + </span><span style="color:#d14">${</span>y<span style="color:#d14">}</span><span style="color:#d14"> = </span><span style="color:#d14">${</span>x <span style="color:#000;font-weight:bold">+</span> y<span style="color:#d14">}</span><span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;1 + 2 = 3&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#d14">`</span><span style="color:#d14">${</span>x<span style="color:#d14">}</span><span style="color:#d14"> + </span><span style="color:#d14">${</span>y <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">2</span><span style="color:#d14">}</span><span style="color:#d14"> = </span><span style="color:#d14">${</span>x <span style="color:#000;font-weight:bold">+</span> y <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">2</span><span style="color:#d14">}</span><span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;1 + 4 = 5&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> obj <span style="color:#000;font-weight:bold">=</span> {x<span style="color:#000;font-weight:bold">:</span> <span style="color:#099">1</span>, y<span style="color:#000;font-weight:bold">:</span> <span style="color:#099">2</span>};
</span></span><span style="display:flex;"><span><span style="color:#d14">`</span><span style="color:#d14">${</span>obj.x <span style="color:#000;font-weight:bold">+</span> obj.y<span style="color:#d14">}</span><span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;3&#34;
</span></span></span></code></pre></div><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> fn() {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;Hello World&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d14">`foo </span><span style="color:#d14">${</span>fn()<span style="color:#d14">}</span><span style="color:#d14"> bar`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// foo Hello World bar
</span></span></span></code></pre></div><p>å¦‚æœå¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„<code>toString</code>æ–¹æ³•ã€‚</p>
<p>å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// å˜é‡placeæ²¡æœ‰å£°æ˜
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span> msg <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">`Hello, </span><span style="color:#d14">${</span>place<span style="color:#d14">}</span><span style="color:#d14">`</span>;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// æŠ¥é”™
</span></span></span></code></pre></div><p>ç”±äºæ¨¡æ¿å­—ç¬¦ä¸²çš„å¤§æ‹¬å·å†…éƒ¨ï¼Œå°±æ˜¯æ‰§è¡Œ JavaScript ä»£ç ï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d14">`Hello </span><span style="color:#d14">${</span><span style="color:#d14">&#39;World&#39;</span><span style="color:#d14">}</span><span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;Hello World&#34;
</span></span></span></code></pre></div><p>æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> tmpl <span style="color:#000;font-weight:bold">=</span> addrs =&gt; <span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;table&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  </span><span style="color:#d14">${</span>addrs.map(addr =&gt; <span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    &lt;tr&gt;&lt;td&gt;</span><span style="color:#d14">${</span>addr.first<span style="color:#d14">}</span><span style="color:#d14">&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    &lt;tr&gt;&lt;td&gt;</span><span style="color:#d14">${</span>addr.last<span style="color:#d14">}</span><span style="color:#d14">&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  `</span>).join(<span style="color:#d14">&#39;&#39;</span>)<span style="color:#d14">}</span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;/table&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>;
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å˜é‡ä¹‹ä¸­ï¼ŒåˆåµŒå…¥äº†å¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> data <span style="color:#000;font-weight:bold">=</span> [
</span></span><span style="display:flex;"><span>    { first<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;&lt;Jane&gt;&#39;</span>, last<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Bond&#39;</span> },
</span></span><span style="display:flex;"><span>    { first<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Lars&#39;</span>, last<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;&lt;Croft&gt;&#39;</span> },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>console.log(tmpl(data));
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &lt;table&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &lt;/table&gt;
</span></span></span></code></pre></div><p>å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥å†™æˆå‡½æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> func <span style="color:#000;font-weight:bold">=</span> (name) =&gt; <span style="color:#d14">`Hello </span><span style="color:#d14">${</span>name<span style="color:#d14">}</span><span style="color:#d14">!`</span>;
</span></span><span style="display:flex;"><span>func(<span style="color:#d14">&#39;Jack&#39;</span>) <span style="color:#998;font-style:italic">// &#34;Hello Jack!&#34;
</span></span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å†™æˆäº†ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ç›¸å½“äºæ‰§è¡Œè¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²äº†ã€‚</p>
<h2 id="å®ä¾‹æ¨¡æ¿ç¼–è¯‘">å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘</h2>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”Ÿæˆæ­£å¼æ¨¡æ¿çš„å®ä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> template <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;% for(let i=0; i &lt; data.supplies.length; i++) { %&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;% } %&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">&lt;/ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>;
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªå¸¸è§„æ¨¡æ¿ã€‚è¯¥æ¨¡æ¿ä½¿ç”¨<code>&lt;%...%&gt;</code>æ”¾ç½® JavaScript ä»£ç ï¼Œä½¿ç”¨<code>&lt;%= ... %&gt;</code>è¾“å‡º JavaScript è¡¨è¾¾å¼ã€‚</p>
<p>æ€ä¹ˆç¼–è¯‘è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ</p>
<p>ä¸€ç§æ€è·¯æ˜¯å°†å…¶è½¬æ¢ä¸º JavaScript è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>echo(<span style="color:#d14">&#39;&lt;ul&gt;&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">let</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> data.supplies.length; i<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>  echo(<span style="color:#d14">&#39;&lt;li&gt;&#39;</span>);
</span></span><span style="display:flex;"><span>  echo(data.supplies[i]);
</span></span><span style="display:flex;"><span>  echo(<span style="color:#d14">&#39;&lt;/li&gt;&#39;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>echo(<span style="color:#d14">&#39;&lt;/ul&gt;&#39;</span>);
</span></span></code></pre></div><p>è¿™ä¸ªè½¬æ¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°±è¡Œäº†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> evalExpr <span style="color:#000;font-weight:bold">=</span> <span style="color:#009926">/&lt;%=(.+?)%&gt;/g</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> expr <span style="color:#000;font-weight:bold">=</span> <span style="color:#009926">/&lt;%([\s\S]+?)%&gt;/g</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>template <span style="color:#000;font-weight:bold">=</span> template
</span></span><span style="display:flex;"><span>  .replace(evalExpr, <span style="color:#d14">&#39;`); \n  echo( $1 ); \n  echo(`&#39;</span>)
</span></span><span style="display:flex;"><span>  .replace(expr, <span style="color:#d14">&#39;`); \n $1 \n  echo(`&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>template <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;echo(`&#39;</span> <span style="color:#000;font-weight:bold">+</span> template <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#39;`);&#39;</span>;
</span></span></code></pre></div><p>ç„¶åï¼Œå°†<code>template</code>å°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢è¿”å›ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> script <span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span><span style="color:#d14">`(function parse(data){
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  let output = &#34;&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  function echo(html){
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    output += html;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  }
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  </span><span style="color:#d14">${</span> template <span style="color:#d14">}</span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  return output;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">})`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">return</span> script;
</span></span></code></pre></div><p>å°†ä¸Šé¢çš„å†…å®¹æ‹¼è£…æˆä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘å‡½æ•°<code>compile</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> compile(template){
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">const</span> evalExpr <span style="color:#000;font-weight:bold">=</span> <span style="color:#009926">/&lt;%=(.+?)%&gt;/g</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">const</span> expr <span style="color:#000;font-weight:bold">=</span> <span style="color:#009926">/&lt;%([\s\S]+?)%&gt;/g</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  template <span style="color:#000;font-weight:bold">=</span> template
</span></span><span style="display:flex;"><span>    .replace(evalExpr, <span style="color:#d14">&#39;`); \n  echo( $1 ); \n  echo(`&#39;</span>)
</span></span><span style="display:flex;"><span>    .replace(expr, <span style="color:#d14">&#39;`); \n $1 \n  echo(`&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  template <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;echo(`&#39;</span> <span style="color:#000;font-weight:bold">+</span> template <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#39;`);&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> script <span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>  <span style="color:#d14">`(function parse(data){
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    let output = &#34;&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    function echo(html){
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      output += html;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    }
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    </span><span style="color:#d14">${</span> template <span style="color:#d14">}</span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    return output;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  })`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> script;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>compile</code>å‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> parse <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">eval</span>(compile(template));
</span></span><span style="display:flex;"><span>div.innerHTML <span style="color:#000;font-weight:bold">=</span> parse({ supplies<span style="color:#000;font-weight:bold">:</span> [ <span style="color:#d14">&#34;broom&#34;</span>, <span style="color:#d14">&#34;mop&#34;</span>, <span style="color:#d14">&#34;cleaner&#34;</span> ] });
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//     &lt;li&gt;broom&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//     &lt;li&gt;mop&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//     &lt;li&gt;cleaner&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//   &lt;/ul&gt;
</span></span></span></code></pre></div><h2 id="æ ‡ç­¾æ¨¡æ¿">æ ‡ç­¾æ¨¡æ¿</h2>
<p>æ¨¡æ¿å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯ä¸Šé¢è¿™äº›ã€‚å®ƒå¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆtagged templateï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>alert<span style="color:#d14">`hello`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ç­‰åŒäº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>alert([<span style="color:#d14">&#39;hello&#39;</span>])
</span></span></code></pre></div><p>æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç®€å•çš„è°ƒç”¨äº†ï¼Œè€Œæ˜¯ä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">10</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tag<span style="color:#d14">`Hello </span><span style="color:#d14">${</span> a <span style="color:#000;font-weight:bold">+</span> b <span style="color:#d14">}</span><span style="color:#d14"> world </span><span style="color:#d14">${</span> a <span style="color:#000;font-weight:bold">*</span> b <span style="color:#d14">}</span><span style="color:#d14">`</span>;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ç­‰åŒäº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>tag([<span style="color:#d14">&#39;Hello &#39;</span>, <span style="color:#d14">&#39; world &#39;</span>, <span style="color:#d14">&#39;&#39;</span>], <span style="color:#099">15</span>, <span style="color:#099">50</span>);
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å‰é¢æœ‰ä¸€ä¸ªæ ‡è¯†å<code>tag</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå°±æ˜¯<code>tag</code>å‡½æ•°å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²åçš„è¿”å›å€¼ã€‚</p>
<p>å‡½æ•°<code>tag</code>ä¾æ¬¡ä¼šæ¥æ”¶åˆ°å¤šä¸ªå‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tag(stringArr, value1, value2){
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ç­‰åŒäº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tag(stringArr, ...values){
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span></code></pre></div><p><code>tag</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ›¿æ¢åªå‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸ç¬¬äºŒä¸ªæˆå‘˜ä¹‹é—´ã€ç¬¬äºŒä¸ªæˆå‘˜ä¸ç¬¬ä¸‰ä¸ªæˆå‘˜ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><code>tag</code>å‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ã€‚ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› æ­¤<code>tag</code>ä¼šæ¥å—åˆ°<code>value1</code>å’Œ<code>value2</code>ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p><code>tag</code>å‡½æ•°æ‰€æœ‰å‚æ•°çš„å®é™…å€¼å¦‚ä¸‹ã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>['Hello ', ' world ', '']</code></li>
<li>ç¬¬äºŒä¸ªå‚æ•°: 15</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š50</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>tag</code>å‡½æ•°å®é™…ä¸Šä»¥ä¸‹é¢çš„å½¢å¼è°ƒç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>tag([<span style="color:#d14">&#39;Hello &#39;</span>, <span style="color:#d14">&#39; world &#39;</span>, <span style="color:#d14">&#39;&#39;</span>], <span style="color:#099">15</span>, <span style="color:#099">50</span>)
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦ç¼–å†™<code>tag</code>å‡½æ•°çš„ä»£ç ã€‚ä¸‹é¢æ˜¯<code>tag</code>å‡½æ•°çš„ä¸€ç§å†™æ³•ï¼Œä»¥åŠè¿è¡Œç»“æœã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">10</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tag(s, v1, v2) {
</span></span><span style="display:flex;"><span>  console.log(s[<span style="color:#099">0</span>]);
</span></span><span style="display:flex;"><span>  console.log(s[<span style="color:#099">1</span>]);
</span></span><span style="display:flex;"><span>  console.log(s[<span style="color:#099">2</span>]);
</span></span><span style="display:flex;"><span>  console.log(v1);
</span></span><span style="display:flex;"><span>  console.log(v2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;OK&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tag<span style="color:#d14">`Hello </span><span style="color:#d14">${</span> a <span style="color:#000;font-weight:bold">+</span> b <span style="color:#d14">}</span><span style="color:#d14"> world </span><span style="color:#d14">${</span> a <span style="color:#000;font-weight:bold">*</span> b<span style="color:#d14">}</span><span style="color:#d14">`</span>;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;Hello &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34; world &#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 15
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 50
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;OK&#34;
</span></span></span></code></pre></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> total <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">30</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> msg <span style="color:#000;font-weight:bold">=</span> passthru<span style="color:#d14">`The total is </span><span style="color:#d14">${</span>total<span style="color:#d14">}</span><span style="color:#d14"> (</span><span style="color:#d14">${</span>total<span style="color:#000;font-weight:bold">*</span><span style="color:#099">1.05</span><span style="color:#d14">}</span><span style="color:#d14"> with tax)`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> passthru(literals) {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> result <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;&#39;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">while</span> (i <span style="color:#000;font-weight:bold">&lt;</span> literals.length) {
</span></span><span style="display:flex;"><span>    result <span style="color:#000;font-weight:bold">+=</span> literals[i<span style="color:#000;font-weight:bold">++</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (i <span style="color:#000;font-weight:bold">&lt;</span> arguments.length) {
</span></span><span style="display:flex;"><span>      result <span style="color:#000;font-weight:bold">+=</span> arguments[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>msg <span style="color:#998;font-style:italic">// &#34;The total is 30 (31.5 with tax)&#34;
</span></span></span></code></pre></div><p>ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ï¼Œå¦‚ä½•å°†å„ä¸ªå‚æ•°æŒ‰ç…§åŸæ¥çš„ä½ç½®æ‹¼åˆå›å»ã€‚</p>
<p><code>passthru</code>å‡½æ•°é‡‡ç”¨ rest å‚æ•°çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> passthru(literals, ...values) {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> output <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> index;
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">for</span> (index <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; index <span style="color:#000;font-weight:bold">&lt;</span> values.length; index<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>    output <span style="color:#000;font-weight:bold">+=</span> literals[index] <span style="color:#000;font-weight:bold">+</span> values[index];
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  output <span style="color:#000;font-weight:bold">+=</span> literals[index]
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> output;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> message <span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>  SaferHTML<span style="color:#d14">`&lt;p&gt;</span><span style="color:#d14">${</span>sender<span style="color:#d14">}</span><span style="color:#d14"> has sent you a message.&lt;/p&gt;`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> SaferHTML(templateData) {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">let</span> s <span style="color:#000;font-weight:bold">=</span> templateData[<span style="color:#099">0</span>];
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">let</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;</span> arguments.length; i<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">let</span> arg <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">String</span>(arguments[i]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// Escape special characters in the substitution.
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    s <span style="color:#000;font-weight:bold">+=</span> arg.replace(<span style="color:#009926">/&amp;/g</span>, <span style="color:#d14">&#34;&amp;amp;&#34;</span>)
</span></span><span style="display:flex;"><span>            .replace(<span style="color:#009926">/&lt;/g</span>, <span style="color:#d14">&#34;&amp;lt;&#34;</span>)
</span></span><span style="display:flex;"><span>            .replace(<span style="color:#009926">/&gt;/g</span>, <span style="color:#d14">&#34;&amp;gt;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// Don&#39;t escape special characters in the template.
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    s <span style="color:#000;font-weight:bold">+=</span> templateData[i];
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> s;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sender</code>å˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡<code>SaferHTML</code>å‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> sender <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;&lt;script&gt;alert(&#34;abc&#34;)&lt;/script&gt;&#39;</span>; <span style="color:#998;font-style:italic">// æ¶æ„ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span> message <span style="color:#000;font-weight:bold">=</span> SaferHTML<span style="color:#d14">`&lt;p&gt;</span><span style="color:#d14">${</span>sender<span style="color:#d14">}</span><span style="color:#d14"> has sent you a message.&lt;/p&gt;`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>message
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &lt;p&gt;&amp;lt;script&amp;gt;alert(&#34;abc&#34;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;
</span></span></span></code></pre></div><p>æ ‡ç­¾æ¨¡æ¿çš„å¦ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>i18n<span style="color:#d14">`Welcome to </span><span style="color:#d14">${</span>siteName<span style="color:#d14">}</span><span style="color:#d14">, you are visitor number </span><span style="color:#d14">${</span>visitorNumber<span style="color:#d14">}</span><span style="color:#d14">!`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &#34;æ¬¢è¿è®¿é—®xxxï¼Œæ‚¨æ˜¯ç¬¬xxxxä½è®¿é—®è€…ï¼&#34;
</span></span></span></code></pre></div><p>æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«å¹¶ä¸èƒ½å–ä»£ Mustache ä¹‹ç±»çš„æ¨¡æ¿åº“ï¼Œå› ä¸ºæ²¡æœ‰æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯å¤„ç†åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ ‡ç­¾å‡½æ•°ï¼Œä½ å¯ä»¥è‡ªå·±æ·»åŠ è¿™äº›åŠŸèƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä¸‹é¢çš„hashTemplateå‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡æ¿å¤„ç†å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">let</span> libraryHtml <span style="color:#000;font-weight:bold">=</span> hashTemplate<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    #for book in </span><span style="color:#d14">${</span>myBooks<span style="color:#d14">}</span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    #end
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>;
</span></span></code></pre></div><p>é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿ï¼Œåœ¨ JavaScript è¯­è¨€ä¹‹ä¸­åµŒå…¥å…¶ä»–è¯­è¨€ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>jsx<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  &lt;div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    &lt;input
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      ref=&#39;input&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      onChange=&#39;</span><span style="color:#d14">${</span><span style="color:#000;font-weight:bold">this</span>.handleChange<span style="color:#d14">}</span><span style="color:#d14">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      defaultValue=&#39;</span><span style="color:#d14">${</span><span style="color:#000;font-weight:bold">this</span>.state.value<span style="color:#d14">}</span><span style="color:#d14">&#39; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">      </span><span style="color:#d14">${</span><span style="color:#000;font-weight:bold">this</span>.state.value<span style="color:#d14">}</span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">   &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>
</span></span></code></pre></div><p>ä¸Šé¢çš„ä»£ç é€šè¿‡<code>jsx</code>å‡½æ•°ï¼Œå°†ä¸€ä¸ª DOM å­—ç¬¦ä¸²è½¬ä¸º React å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<code>jsx</code>å‡½æ•°çš„<a href="https://gist.github.com/lygaret/a68220defa69174bdec5">å…·ä½“å®ç°</a>ã€‚</p>
<p>ä¸‹é¢åˆ™æ˜¯ä¸€ä¸ªå‡æƒ³çš„ä¾‹å­ï¼Œé€šè¿‡<code>java</code>å‡½æ•°ï¼Œåœ¨ JavaScript ä»£ç ä¹‹ä¸­è¿è¡Œ Java ä»£ç ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>java<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">class HelloWorldApp {
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  public static void main(String[] args) {
</span></span></span><span style="display:flex;"><span><span style="color:#d14">    System.out.println(&#34;Hello World!&#34;); // Display the string.
</span></span></span><span style="display:flex;"><span><span style="color:#d14">  }
</span></span></span><span style="display:flex;"><span><span style="color:#d14">}
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span>HelloWorldApp.main();
</span></span></code></pre></div><p>æ¨¡æ¿å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>console.log<span style="color:#d14">`123`</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// [&#34;123&#34;, raw: Array[1]]
</span></span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>console.log</code>æ¥å—çš„å‚æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„æœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ï¼Œä¿å­˜çš„æ˜¯è½¬ä¹‰åçš„åŸå­—ç¬¦ä¸²ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>tag<span style="color:#d14">`First line\nSecond line`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tag(strings) {
</span></span><span style="display:flex;"><span>  console.log(strings.raw[<span style="color:#099">0</span>]);
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// strings.raw[0] ä¸º &#34;First line\\nSecond line&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#998;font-style:italic">// æ‰“å°è¾“å‡º &#34;First line\nSecond line&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>tag</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>strings</code>ï¼Œæœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ï¼Œä¹ŸæŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„çš„æˆå‘˜ä¸<code>strings</code>æ•°ç»„å®Œå…¨ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œ<code>strings</code>æ•°ç»„æ˜¯<code>[&quot;First line\nSecond line&quot;]</code>ï¼Œé‚£ä¹ˆ<code>strings.raw</code>æ•°ç»„å°±æ˜¯<code>[&quot;First line\\nSecond line&quot;]</code>ã€‚ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯å­—ç¬¦ä¸²é‡Œé¢çš„æ–œæ éƒ½è¢«è½¬ä¹‰äº†ã€‚æ¯”å¦‚ï¼Œstrings.raw æ•°ç»„ä¼šå°†<code>\n</code>è§†ä¸º<code>\\</code>å’Œ<code>n</code>ä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å–å¾—è½¬ä¹‰ä¹‹å‰çš„åŸå§‹æ¨¡æ¿è€Œè®¾è®¡çš„ã€‚</p>
<h2 id="æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶">æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</h2>
<p>å‰é¢æåˆ°æ ‡ç­¾æ¨¡æ¿é‡Œé¢ï¼Œå¯ä»¥å†…åµŒå…¶ä»–è¯­è¨€ã€‚ä½†æ˜¯ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²é»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå¯¼è‡´æ— æ³•åµŒå…¥å…¶ä»–è¯­è¨€ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œæ ‡ç­¾æ¨¡æ¿é‡Œé¢å¯ä»¥åµŒå…¥ LaTEX è¯­è¨€ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> latex(strings) {
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> <span style="color:#0086b3">document</span> <span style="color:#000;font-weight:bold">=</span> latex<span style="color:#d14">`
</span></span></span><span style="display:flex;"><span><span style="color:#d14">\newcommand{\fun}{\textbf{Fun!}}  // æ­£å¸¸å·¥ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#d14">\newcommand{\unicode}{\textbf{Unicode!}} // æŠ¥é”™
</span></span></span><span style="display:flex;"><span><span style="color:#d14">\newcommand{\xerxes}{\textbf{King!}} // æŠ¥é”™
</span></span></span><span style="display:flex;"><span><span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">Breve over the h goes \u{h}ere // æŠ¥é”™
</span></span></span><span style="display:flex;"><span><span style="color:#d14">`</span>
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>document</code>å†…åµŒçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¯¹äº LaTEX è¯­è¨€æ¥è¯´å®Œå…¨æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ JavaScript å¼•æ“ä¼šæŠ¥é”™ã€‚åŸå› å°±åœ¨äºå­—ç¬¦ä¸²çš„è½¬ä¹‰ã€‚</p>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ä¼šå°†<code>\u00FF</code>å’Œ<code>\u{42}</code>å½“ä½œ Unicode å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥<code>\unicode</code>è§£ææ—¶æŠ¥é”™ï¼›è€Œ<code>\x56</code>ä¼šè¢«å½“ä½œåå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œæ‰€ä»¥<code>\xerxes</code>ä¼šæŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>\u</code>å’Œ<code>\x</code>åœ¨ LaTEX é‡Œé¢æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä½†æ˜¯ JavaScript å°†å®ƒä»¬è½¬ä¹‰äº†ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES2018 <a href="https://tc39.github.io/proposal-template-literal-revision/">æ”¾æ¾</a>äº†å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œé¢çš„å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ã€‚å¦‚æœé‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå°±è¿”å›<code>undefined</code>ï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œå¹¶ä¸”ä»<code>raw</code>å±æ€§ä¸Šé¢å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tag(strs) {
</span></span><span style="display:flex;"><span>  strs[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">===</span> <span style="color:#000;font-weight:bold">undefined</span>
</span></span><span style="display:flex;"><span>  strs.raw[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#34;\\unicode and \\u{55}&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>tag<span style="color:#d14">`\unicode and \u{55}`</span>
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²åŸæœ¬æ˜¯åº”è¯¥æŠ¥é”™çš„ï¼Œä½†æ˜¯ç”±äºæ”¾æ¾äº†å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸æŠ¥é”™äº†ï¼ŒJavaScript å¼•æ“å°†ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾ç½®ä¸º<code>undefined</code>ï¼Œä½†æ˜¯<code>raw</code>å±æ€§ä¾ç„¶å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ï¼Œå› æ­¤<code>tag</code>å‡½æ•°è¿˜æ˜¯å¯ä»¥å¯¹åŸå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™ç§å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„æ”¾æ¾ï¼Œåªåœ¨æ ‡ç­¾æ¨¡æ¿è§£æå­—ç¬¦ä¸²æ—¶ç”Ÿæ•ˆï¼Œä¸æ˜¯æ ‡ç­¾æ¨¡æ¿çš„åœºåˆï¼Œä¾ç„¶ä¼šæŠ¥é”™ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">let</span> bad <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">`bad escape sequence: \unicode`</span>; <span style="color:#998;font-style:italic">// æŠ¥é”™
</span></span></span></code></pre></div>
        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>Author: </strong><a rel="author" href="http://shansec.github.io">æœªæ¥å¯æœŸ</a></li>
        <li style="word-break:break-all"><strong>Link: </strong><a href="http://shansec.github.io/post/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/">http://shansec.github.io/post/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/</a></li>
        <li><strong>License: </strong>This work is under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…è®¸å¯åè®®</a>. Kindly fulfill the requirements of the aforementioned License when adapting or creating a derivative of this work.</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/es6/%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/">å˜é‡è§£æ„èµ‹å€¼</a></li>
        
        <li><a href="/post/es6/%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/">å‡½æ•°çš„æ‰©å±•</a></li>
        
        <li><a href="/post/es6/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">å‡½æ•°å¼ç¼–ç¨‹</a></li>
        
        <li><a href="/post/es6/Symbol/">Symbol</a></li>
        
        <li><a href="/post/es6/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">Setå’ŒMapæ•°æ®ç»“æ„</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/javaScript' target="_blank">javaScript</a></li>
                
                <li><a href='/tags/es6' target="_blank">es6</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
    
    

</div>

                    <footer id="footer">
    <div>
        &copy; 2024 <a href="http://shansec.github.io">æœªæ¥å¯æœŸçš„åšå®¢ By æœªæ¥å¯æœŸ</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">é£é›ªæ— æƒ…</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>
<style type="text/css">
div.highlight {
    position: relative;
    margin: 1em 0px;
}

.copy-code {
    display: none;
    position: absolute;
    top: 4px;
    right: 4px;
    color: rgba(255, 255, 255, 0.8);
    background: rgba(78, 78, 78, 0.8);
    border-radius: var(--radius);
    padding: 0 5px;
    font: inherit;
    user-select: none;
    cursor: pointer;
    border: 0;
    --radius: 8px;
}

div.highlight:hover .copy-code,pre:hover .copy-code {
    display: block;
}

</style>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>


    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='http://shansec.github.io/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="http://shansec.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>

    <section class="widget">
        <h3 class="widget-title">Latest articles</h3>
<ul class="widget-list">
    
    <li>
        <a href="http://shansec.github.io/post/ts/Typescript-class%E7%B1%BB%E5%9E%8B/" title="Typescript Classç±»å‹" target="_blank">Typescript Classç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/Typescript-interface/" title="Typescript Interface" target="_blank">Typescript Interface</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B/" title="Typescript å‡½æ•°ç±»å‹" target="_blank">Typescript å‡½æ•°ç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B/" title="Typescript å¯¹è±¡ç±»å‹" target="_blank">Typescript å¯¹è±¡ç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E5%85%83%E7%BB%84%E7%B1%BB%E5%9E%8B/" title="Typescript æ•°ç»„ç±»å‹" target="_blank">Typescript æ•°ç»„ç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B/" title="Typescript æ•°ç»„ç±»å‹" target="_blank">Typescript æ•°ç»„ç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/" title="Typescript ç±»å‹ç³»ç»Ÿ" target="_blank">Typescript ç±»å‹ç³»ç»Ÿ</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-any%E7%B1%BB%E5%9E%8B%E5%92%8Cunknown%E7%B1%BB%E5%9E%8B%E5%92%8Cnever%E7%B1%BB%E5%9E%8B/" title="Typescript Anyç±»å‹å’Œunknownç±»å‹å’Œneverç±»å‹" target="_blank">Typescript Anyç±»å‹å’Œunknownç±»å‹å’Œneverç±»å‹</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/ts/typescript-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" title="Typescript åŸºæœ¬ç”¨æ³•" target="_blank">Typescript åŸºæœ¬ç”¨æ³•</a>
    </li>
    
    <li>
        <a href="http://shansec.github.io/post/es6/%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E6%89%A9%E5%B1%95/" title="è¿ç®—ç¬¦çš„æ‰©å±•" target="_blank">è¿ç®—ç¬¦çš„æ‰©å±•</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>Categories</a></h3>
<ul class="widget-list">
    
    <li><a href="http://shansec.github.io/categories/go/">go (43)</a></li>
    
    <li><a href="http://shansec.github.io/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯ (61)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>Tags</a></h3>
<div class="tagcloud">
    
    <a href="http://shansec.github.io/tags/CSS/">CSS</a>
    
    <a href="http://shansec.github.io/tags/HTTP/">HTTP</a>
    
    <a href="http://shansec.github.io/tags/javaScript/">javaScript</a>
    
    <a href="http://shansec.github.io/tags/CSS/">CSS</a>
    
    <a href="http://shansec.github.io/tags/docker/">docker</a>
    
    <a href="http://shansec.github.io/tags/es6/">es6</a>
    
    <a href="http://shansec.github.io/tags/go/">go</a>
    
    <a href="http://shansec.github.io/tags/go-%E5%9F%BA%E7%A1%80/">go åŸºç¡€</a>
    
    <a href="http://shansec.github.io/tags/go-%E6%A0%87%E5%87%86%E5%BA%93/">go æ ‡å‡†åº“</a>
    
    <a href="http://shansec.github.io/tags/javaScript/">javaScript</a>
    
    <a href="http://shansec.github.io/tags/jwt/">jwt</a>
    
    <a href="http://shansec.github.io/tags/package/">package</a>
    
    <a href="http://shansec.github.io/tags/pinia/">pinia</a>
    
    <a href="http://shansec.github.io/tags/redis/">redis</a>
    
    <a href="http://shansec.github.io/tags/sql/">sql</a>
    
    <a href="http://shansec.github.io/tags/sqlx/">sqlx</a>
    
    <a href="http://shansec.github.io/tags/typescript/">typescript</a>
    
    <a href="http://shansec.github.io/tags/vue/">vue</a>
    
    <a href="http://shansec.github.io/tags/%E5%AD%98%E5%82%A8/">å­˜å‚¨</a>
    
    <a href="http://shansec.github.io/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">å¾®ä¿¡å°ç¨‹åº</a>
    
    <a href="http://shansec.github.io/tags/%E6%A0%87%E5%87%86%E5%BA%93/">æ ‡å‡†åº“</a>
    
    <a href="http://shansec.github.io/tags/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
    
    <a href="http://shansec.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/">è®¡ç®—æœºåŸç†</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">Links</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.liwenzhou.com/" title="ææ–‡å‘¨çš„åšå®¢">ææ–‡å‘¨çš„åšå®¢</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">Meta</h3>
        <ul class="widget-list">
            <li><a href="http://shansec.github.io/index.xml">RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>